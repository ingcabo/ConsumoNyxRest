

//'Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type, X-PINGOTHER,*"
var interceptor = function($q){
return{

		request: function(config){
				console.log(config);
			//	config.url= config.url.replace('apiRestCodeigniter','langalanga');
				config.headers['key']  = '4TrdcJJPXfpy9fZaMBRYreIwBkKNWjSkrt9fsWgb';
				return config;	
		},

		response: function (result) {
                console.log('Repos:');

                // modify the $http response data
               // result.data.splice(0, 10).forEach(function (repo) {
                console.log(result);
              //  })
                return result;
            },
		responseError:function(rejection){
			console.log('Failed with',rejection.status,'status');
			return $q.rejection(rejection);	

		}

	}

};




var app = angular.module('angularTable',['angularUtils.directives.dirPagination']);
app.config(function ($httpProvider) { 

$httpProvider.interceptors.push(interceptor);


});

app.controller('listdata',function($scope,$http){



		 angular.element(document).ready(function () {
    		$scope.getCompras();
   	 });
		


		$scope.getCompras=function(){
				$scope.compras=[];
				$scope.idtext2='';
				$scope.url = "http://127.0.0.1/nyxapirest/index.php/Myquery/detallecompra/";
				$http.get($scope.url+$scope.idtext2)
				.success(function(data){
				console.log(data);
				$scope.compras = data;
						
				})
				.error(function(data){
				alert('ss');
				console.log(data);
				$scope.compras = data;
				});

				
				$scope.sort =function(keyname){
					
						$scope.sortKey=keyname;
						$scope.reverse=!$scope.reverse;
				
				
				}

			}	

});

